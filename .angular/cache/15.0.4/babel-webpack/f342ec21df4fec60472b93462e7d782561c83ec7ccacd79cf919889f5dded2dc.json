{"ast":null,"code":"import { TunSwapPage } from '../tun-swap/tun-swap.page';\nimport { TunReleasePage } from '../tun-release/tun-release.page';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"../userstate.service\";\nimport * as i3 from \"../connectors/churchapi.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nfunction ItemslidePage_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵelement(1, \"ion-spinner\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ItemslidePage_ion_item_sliding_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item-sliding\", null, 9)(2, \"ion-item\", 10);\n    i0.ɵɵlistener(\"click\", function ItemslidePage_ion_item_sliding_12_Template_ion_item_click_2_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const _r3 = i0.ɵɵreference(1);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.toggle(_r3));\n    });\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-item-options\")(5, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ItemslidePage_ion_item_sliding_12_Template_button_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.swapItem(item_r2, item_r2.id, item_r2.repeat_id, item_r2.start, item_r2.ende, item_r2.format, item_r2.person));\n    });\n    i0.ɵɵtext(6, \" tauschen\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function ItemslidePage_ion_item_sliding_12_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.releaseItem(item_r2, item_r2.id, item_r2.repeat_id, item_r2.start, item_r2.ende, item_r2.format, item_r2.person));\n    });\n    i0.ɵɵtext(8, \" freigeben\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate3(\"\", item_r2.time, \"\\u00A0 \", item_r2.format, \"\\u00A0(\", item_r2.person, \") \");\n  }\n}\nexport let ItemslidePage = /*#__PURE__*/(() => {\n  class ItemslidePage {\n    constructor(navCtrl, popover, userstate, churchtools, platform, router) {\n      this.navCtrl = navCtrl;\n      this.popover = popover;\n      this.userstate = userstate;\n      this.churchtools = churchtools;\n      this.platform = platform;\n      this.router = router;\n      this.initializing = false;\n      let userfilter = encodeURI(this.userstate.shortusername);\n      let explicitusername = encodeURI(this.userstate.explicitusername);\n      this.churchtools.getGebetsschichten(7300, userfilter, explicitusername).then(result => {\n        console.log(JSON.stringify(result.data));\n        this.items = JSON.parse(result.data);\n        this.initializing = false;\n      });\n      //this.platform.backButton.subscribeWithPriority(10, () => {\n      //  this.router.navigate([\"/tabs/tagundnacht\"]);\n      //});\n    }\n\n    ngOnInit() {\n      this.initializing = true;\n    }\n    removeItem(item) {\n      for (let i = 0; i < this.items.length; i++) {\n        if (this.items[i] == item) {\n          this.items.splice(i, 1);\n        }\n      }\n    }\n    //slide with click\n    toggle(item) {\n      if (item['el'].classList.contains('item-sliding-active-slide') || item['el'].classList.contains('item-sliding-active-options-end')) item.close();else item.open('end');\n    }\n    swapItem(item, sessID, repeatID, startdate, enddate, format, person) {\n      console.log(\"repeatid=\" + repeatID);\n      if (repeatID == \"\") {\n        alert(\"Die Schicht '\" + format + \"' kann nicht mehr getauscht werden. Sie wurde bereits einmal freigegeben und übernommen bzw. getauscht\");\n      } else {\n        console.log('tausche Schicht mit ID=' + sessID);\n        this.popover.create({\n          component: TunSwapPage,\n          componentProps: {\n            sessID: sessID,\n            repeatID: repeatID,\n            startdate: startdate,\n            enddate: enddate,\n            oldformat: format,\n            oldperson: person\n          },\n          cssClass: 'modal_tun_confirm',\n          backdropDismiss: false,\n          showBackdrop: false\n        }).then(popoverElement => {\n          popoverElement.onDidDismiss().then(ret => {\n            console.log(JSON.parse(JSON.stringify(ret)).data);\n            if (JSON.parse(JSON.stringify(ret)).data == \"success\") {\n              console.log(\"Session getauscht -> entfernte Listeneintrag\");\n              this.removeItem(item);\n            }\n          });\n          popoverElement.present();\n        });\n      }\n    }\n    releaseItem(item, sessID, repeatID, startdate, enddate, format, person) {\n      console.log(\"repeatid=\" + repeatID);\n      if (repeatID == \"\") {\n        alert(\"Die Schicht '\" + format + \"' kann nicht mehr freigegeben werden. Sie wurde bereits einmal freigegeben und übernommen bzw. getauscht\");\n      } else {\n        console.log('gib Schicht mit ID=' + sessID + ' frei!');\n        this.popover.create({\n          component: TunReleasePage,\n          componentProps: {\n            sessID: sessID,\n            repeatID: repeatID,\n            startdate: startdate,\n            enddate: enddate,\n            oldformat: format,\n            oldperson: person\n          },\n          cssClass: 'modal_tun_confirm',\n          backdropDismiss: false,\n          showBackdrop: false\n        }).then(popoverElement => {\n          popoverElement.onDidDismiss().then(ret => {\n            console.log(JSON.parse(JSON.stringify(ret)).data);\n            if (JSON.parse(JSON.stringify(ret)).data == \"success\") {\n              console.log(\"Session geloescht -> entfernte Listeneintrag\");\n              this.removeItem(item);\n            }\n          });\n          popoverElement.present();\n        });\n      }\n    }\n    BackActivated() {\n      this.router.navigate([\"/tabs/tagundnacht\"]);\n    }\n  }\n  ItemslidePage.ɵfac = function ItemslidePage_Factory(t) {\n    return new (t || ItemslidePage)(i0.ɵɵdirectiveInject(i1.NavController), i0.ɵɵdirectiveInject(i1.PopoverController), i0.ɵɵdirectiveInject(i2.UserstateService), i0.ɵɵdirectiveInject(i3.ChurchapiService), i0.ɵɵdirectiveInject(i1.Platform), i0.ɵɵdirectiveInject(i4.Router));\n  };\n  ItemslidePage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ItemslidePage,\n    selectors: [[\"app-itemslide\"]],\n    decls: 13,\n    vars: 2,\n    consts: [[1, \"ueberuns-text\"], [1, \"punkte\"], [\"src\", \"../assets/svg/punkte_yellow.svg\", \"id\", \"punkte\"], [1, \"pfeil\"], [\"src\", \"../assets/svg/pfeil_blue_1.svg\", \"id\", \"pfeile\"], [1, \"positionierung\"], [\"class\", \"spinner-container\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"spinner-container\"], [\"slide\", \"\"], [3, \"click\"], [1, \"swap\", 3, \"click\"], [1, \"release\", 3, \"click\"]],\n    template: function ItemslidePage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-content\")(1, \"h1\", 0);\n        i0.ɵɵtext(2, \"Meine Gebets-\");\n        i0.ɵɵelement(3, \"br\");\n        i0.ɵɵtext(4, \"schichten\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 1);\n        i0.ɵɵelement(6, \"img\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 3);\n        i0.ɵɵelement(8, \"img\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 5);\n        i0.ɵɵtemplate(10, ItemslidePage_div_10_Template, 2, 0, \"div\", 6);\n        i0.ɵɵelementStart(11, \"ion-list\");\n        i0.ɵɵtemplate(12, ItemslidePage_ion_item_sliding_12_Template, 9, 3, \"ion-item-sliding\", 7);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngIf\", ctx.initializing);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.items);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i1.IonContent, i1.IonItem, i1.IonItemOptions, i1.IonItemSliding, i1.IonList, i1.IonSpinner],\n    styles: [\"h1.ueberuns-text[_ngcontent-%COMP%]{margin-top:72px;margin-left:104px;text-align:left;font-family:Lato bold;font:700 27px/27px Lato;letter-spacing:2.02px;text-transform:uppercase;color:#003d58;opacity:1}.back[_ngcontent-%COMP%]{position:absolute;top:10px;left:5px;color:#003e588a}.positionierung[_ngcontent-%COMP%]{position:absolute;top:230px;width:100%}.punkte[_ngcontent-%COMP%]{position:absolute;stroke-width:.1px;top:-5px;right:27px;width:66px;height:66px;opacity:1}.pfeil[_ngcontent-%COMP%]{position:absolute;top:110px;left:31px;width:48px;height:30px}.hydrated[_ngcontent-%COMP%]{visibility:inherit;font-family:Source Sans Pro;font-weight:400;font-style:normal;color:#474747;font-size:16}.swap[_ngcontent-%COMP%]{background-color:#003d58;font-family:Source Sans Pro;font-style:normal;font-weight:600;color:#fff;font-size:10px}.release[_ngcontent-%COMP%]{background-color:#777;font-family:Source Sans Pro;font-style:normal;font-weight:600;color:#fff;font-size:10px}.spinner-container[_ngcontent-%COMP%]{text-align:center}\"]\n  });\n  return ItemslidePage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}