{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../communications/feeds.service\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"@ionic-native/File/ngx\";\nimport * as i4 from \"../userstate.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../predigt-element/predigt-element.component\";\nfunction PredigtenAudioPage_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-predigt-element\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const predigt_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"predigt\", predigt_r2);\n  }\n}\nfunction PredigtenAudioPage_ion_button_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 11);\n    i0.ɵɵlistener(\"click\", function PredigtenAudioPage_ion_button_12_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.getMoreSermons());\n    });\n    i0.ɵɵtext(1, \"mehr\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst MEDIA_FOLDER_NAME = 'temp_files';\nexport let PredigtenAudioPage = /*#__PURE__*/(() => {\n  class PredigtenAudioPage {\n    //localFiles = [];\n    constructor(feedservice, platform, file, userState) {\n      this.feedservice = feedservice;\n      this.platform = platform;\n      this.file = file;\n      this.userState = userState;\n      this.isViewCompact = true;\n    }\n    ngOnInit() {\n      this.getRssData();\n      //console.log('ngInit predigt.element. AppPageMedienInit='+this.userState.AppPageMedienInit);\n      this.platform.ready().then(() => {\n        if (this.userState.AppPageMedienInit) {\n          this.userState.AppPageMedienInit = false;\n          console.log('Page is now ready. reset AppMageMedienInit');\n          let path = this.file.dataDirectory;\n          this.file.checkDir(path, MEDIA_FOLDER_NAME).then(() => {\n            this.loadFiles();\n          }, err => {\n            this.file.createDir(path, MEDIA_FOLDER_NAME, false);\n          });\n        }\n      });\n    }\n    //read files in local storage\n    loadFiles() {\n      console.log('====> lade local files in array');\n      this.file.listDir(this.file.dataDirectory, MEDIA_FOLDER_NAME).then(res => {\n        this.userState.SermonLocalFiles = res;\n        //this.localFiles = res;\n        console.log('local files=' + JSON.stringify(this.userState.SermonLocalFiles));\n      }, err => console.log('error loading files: ', err));\n    }\n    getRssData() {\n      this.rssData = this.feedservice.RssData;\n      this.predigten = this.rssData.rss.channel[0].item;\n      //console.log(JSON.stringify(this.rssData));\n    }\n\n    doRefresh(event) {\n      return __awaiter(this, void 0, void 0, function* () {\n        if (event) {\n          console.log('re-read feeds');\n          this.predigten = [];\n          this.isViewCompact = true;\n          yield this.feedservice.GetRssFeedData(this.feedservice.PREDIGTEN_URL, '').then(res => {\n            //console.log(\"Feed gelesen\"+JSON.stringify(res));\n            //console.log('=> set rss Data from feed');\n            this.rssData = this.feedservice.RssData;\n            this.predigten = this.rssData.rss.channel[0].item;\n          });\n          event.target.complete();\n        }\n      });\n    }\n    getMoreSermons() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.isViewCompact = false;\n        yield this.feedservice.GetRssFeedData(this.feedservice.PREDIGTEN_URL, 'more').then(res => {\n          //console.log(\"Feed gelesen\"+JSON.stringify(res));\n          //console.log('=> set rss Data from feed');\n          this.rssData = this.feedservice.RssData;\n          this.predigten = this.predigten.concat(this.rssData.rss.channel[0].item);\n        });\n      });\n    }\n  }\n  PredigtenAudioPage.ɵfac = function PredigtenAudioPage_Factory(t) {\n    return new (t || PredigtenAudioPage)(i0.ɵɵdirectiveInject(i1.FeedsService), i0.ɵɵdirectiveInject(i2.Platform), i0.ɵɵdirectiveInject(i3.File), i0.ɵɵdirectiveInject(i4.UserstateService));\n  };\n  PredigtenAudioPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PredigtenAudioPage,\n    selectors: [[\"app-predigten-audio\"]],\n    decls: 13,\n    vars: 2,\n    consts: [[\"slot\", \"fixed\", \"pullMin\", \"100\", \"pullMax\", \"200\", 3, \"ionRefresh\"], [\"pullingIcon\", \"arrow-down-outline\", \"pullingText\", \"ziehen zum Aktualisieren\", \"refreshingSpinner\", \"circular\", \"refreshingText\", \"es wird aktualisiert...\"], [1, \"predigt-title\"], [1, \"header-label\"], [1, \"kreuze\"], [\"src\", \"../assets/svg/kreuze_blue.svg\", \"id\", \"kreuze\"], [1, \"pfeil\"], [\"src\", \"../assets/svg/pfeil_yellow_2.svg\", \"id\", \"pfeile\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"centered\", 3, \"click\", 4, \"ngIf\"], [3, \"predigt\"], [1, \"centered\", 3, \"click\"]],\n    template: function PredigtenAudioPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-content\")(1, \"ion-refresher\", 0);\n        i0.ɵɵlistener(\"ionRefresh\", function PredigtenAudioPage_Template_ion_refresher_ionRefresh_1_listener($event) {\n          return ctx.doRefresh($event);\n        });\n        i0.ɵɵelement(2, \"ion-refresher-content\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"ion-label\", 3);\n        i0.ɵɵtext(5, \"PREDIGTEN\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 4);\n        i0.ɵɵelement(7, \"img\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 6);\n        i0.ɵɵelement(9, \"img\", 7);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"ion-list\");\n        i0.ɵɵtemplate(11, PredigtenAudioPage_div_11_Template, 2, 1, \"div\", 8);\n        i0.ɵɵtemplate(12, PredigtenAudioPage_ion_button_12_Template, 2, 0, \"ion-button\", 9);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngForOf\", ctx.predigten);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isViewCompact);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i2.IonButton, i2.IonContent, i2.IonLabel, i2.IonList, i2.IonRefresher, i2.IonRefresherContent, i6.PredigtElementComponent],\n    styles: [\".predigt-title[_ngcontent-%COMP%]{box-shadow:0 3px 6px #00000029;width:100%;height:209px;background-image:url(Header_Unterseiten_MEDIATHEK.71f2bf19a3f495a4.jpg);background-size:cover}.header-label[_ngcontent-%COMP%]{position:absolute;top:158px;left:26px;color:#fff;font-family:Lato bold;font-weight:400;font-style:normal;font-size:27px}.kreuze[_ngcontent-%COMP%]{top:27px;left:14px;width:79px;height:10px;opacity:1;position:absolute;pointer-events:none}.pfeil[_ngcontent-%COMP%]{position:absolute;top:139px;right:72px;width:67.45px;height:59px;pointer-events:none}.descriptionopen[_ngcontent-%COMP%]{white-space:normal}.centered[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}\"]\n  });\n  return PredigtenAudioPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}