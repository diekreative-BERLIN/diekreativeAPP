{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"../connectors/churchapi.service\";\nimport * as i3 from \"../userstate.service\";\nimport * as i4 from \"@angular/forms\";\nexport let LoginModalPage = /*#__PURE__*/(() => {\n  class LoginModalPage {\n    constructor(modalController, churchapiService, userService) {\n      this.modalController = modalController;\n      this.churchapiService = churchapiService;\n      this.userService = userService;\n    }\n    ngOnInit() {}\n    dismiss() {\n      // using the injected ModalController this page\n      // can \"dismiss\" itself and optionally pass back data\n      this.modalController.dismiss({\n        'dismissed': true\n      });\n    }\n    login() {\n      this.churchapiService.login(this.username, this.password).then(res => {\n        this.userService.userLogginSuccessful(JSON.parse(res.data).data.personId);\n        this.dismiss();\n      }).catch(err => {\n        console.log(\"error here: \" + JSON.stringify(err));\n        alert('Logindaten sind ungültig. Benutzername oder Passwort stimmen nicht oder Zugang gesperrt.\\n\\nBitte prüfe auch ob Wlan oder mobile Daten aktiviert sind, da ein Login bei fehlender Verbindung nicht möglich ist.');\n      });\n    }\n  }\n  LoginModalPage.ɵfac = function LoginModalPage_Factory(t) {\n    return new (t || LoginModalPage)(i0.ɵɵdirectiveInject(i1.ModalController), i0.ɵɵdirectiveInject(i2.ChurchapiService), i0.ɵɵdirectiveInject(i3.UserstateService));\n  };\n  LoginModalPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginModalPage,\n    selectors: [[\"app-login-modal\"]],\n    decls: 24,\n    vars: 2,\n    consts: [[\"slot\", \"start\"], [\"slot\", \"end\", 3, \"click\"], [\"type\", \"text\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"password\", 3, \"ngModel\", \"ngModelChange\"], [\"expand\", \"block\", 3, \"click\"]],\n    template: function LoginModalPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-label\", 0);\n        i0.ɵɵtext(3, \"Churchtools Login\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-button\", 1);\n        i0.ɵɵlistener(\"click\", function LoginModalPage_Template_ion_button_click_4_listener() {\n          return ctx.dismiss();\n        });\n        i0.ɵɵtext(5, \"zur\\u00FCck\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(6, \" \\u00A0\\u00A0 \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"ion-content\")(8, \"ion-item\");\n        i0.ɵɵtext(9, \" \\u00A0\");\n        i0.ɵɵelement(10, \"br\");\n        i0.ɵɵtext(11, \" Mitglieder und Freunde der Gemeinde, die zu unserem Churchtools einen Zugang haben, k\\u00F6nnen sich hier mit ihrem in Churchtools gespeichertem E-Mail/Benutzernamen und Passwort einloggen. Dadurch wird das Checkin per QR-Code zu unseren Gottesdiensten freigeschaltet und, falls sie registrierte Beter sind, auch weitere Funktionen zum Verwalten der Gebetsschichten sowie Zugang zum T\\u00FCr\\u00F6ffner. \");\n        i0.ɵɵelement(12, \"br\");\n        i0.ɵɵtext(13, \"\\u00A0 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"ion-item\")(15, \"ion-label\");\n        i0.ɵɵtext(16, \"Benutzername\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"ion-input\", 2);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginModalPage_Template_ion_input_ngModelChange_17_listener($event) {\n          return ctx.username = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"ion-item\")(19, \"ion-label\");\n        i0.ɵɵtext(20, \"Passwort\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"ion-input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginModalPage_Template_ion_input_ngModelChange_21_listener($event) {\n          return ctx.password = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"ion-button\", 4);\n        i0.ɵɵlistener(\"click\", function LoginModalPage_Template_ion_button_click_22_listener() {\n          return ctx.login();\n        });\n        i0.ɵɵtext(23, \"Login\");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(17);\n        i0.ɵɵproperty(\"ngModel\", ctx.username);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.password);\n      }\n    },\n    dependencies: [i4.NgControlStatus, i4.NgModel, i1.IonButton, i1.IonContent, i1.IonHeader, i1.IonInput, i1.IonItem, i1.IonLabel, i1.IonToolbar, i1.TextValueAccessor]\n  });\n  return LoginModalPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}