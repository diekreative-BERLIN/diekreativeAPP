{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../userstate.service\";\nimport * as i2 from \"@ionic-native/social-sharing/ngx\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@ionic-native/in-app-browser/ngx\";\nimport * as i6 from \"@ionic-native/File/ngx\";\nimport * as i7 from \"@awesome-cordova-plugins/file-transfer/ngx\";\nimport * as i8 from \"@angular/common\";\nfunction PredigtElementComponent_ion_icon_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 11);\n  }\n}\nfunction PredigtElementComponent_ion_icon_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 12);\n  }\n}\nfunction PredigtElementComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.predigt.description[0]);\n  }\n}\nfunction PredigtElementComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r3.predigt.description[0]);\n  }\n}\nfunction PredigtElementComponent_div_16_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"ion-tab-button\", 2);\n    i0.ɵɵlistener(\"click\", function PredigtElementComponent_div_16_div_12_Template_ion_tab_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.saveSermon(ctx_r9.predigt.enclosure[0].$.url));\n    });\n    i0.ɵɵelement(2, \"ion-icon\", 22);\n    i0.ɵɵelementStart(3, \"ion-label\", 15);\n    i0.ɵɵtext(4, \"SPEICHERN\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction PredigtElementComponent_div_16_ng_template_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-tab-button\", 2);\n    i0.ɵɵlistener(\"click\", function PredigtElementComponent_div_16_ng_template_13_Template_ion_tab_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.freeUpSermon(ctx_r11.predigt.enclosure[0].$.url));\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 23);\n    i0.ɵɵelementStart(2, \"ion-label\", 15);\n    i0.ɵɵtext(3, \"GESPEICHERT\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PredigtElementComponent_div_16_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"br\");\n    i0.ɵɵtext(2, \" \\u00A0\");\n    i0.ɵɵelementStart(3, \"audio\", 24);\n    i0.ɵɵtext(4, \" \\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\");\n    i0.ɵɵelement(5, \"source\", 25);\n    i0.ɵɵtext(6, \" \\u00A0\\u00A0\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r8.currentSermonURL, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction PredigtElementComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"br\");\n    i0.ɵɵelementStart(2, \"ion-toolbar\")(3, \"ion-buttons\")(4, \"ion-tab-button\", 2);\n    i0.ɵɵlistener(\"click\", function PredigtElementComponent_div_16_Template_ion_tab_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.openPlayer(ctx_r13.predigt.enclosure[0].$.url));\n    });\n    i0.ɵɵelement(5, \"ion-icon\", 14);\n    i0.ɵɵelementStart(6, \"ion-label\", 15);\n    i0.ɵɵtext(7, \"ANH\\u00D6REN\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"ion-tab-button\", 2);\n    i0.ɵɵlistener(\"click\", function PredigtElementComponent_div_16_Template_ion_tab_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.shareLink(ctx_r15.predigt.link[0], ctx_r15.predigt.title[0], ctx_r15.predigt.description[0]));\n    });\n    i0.ɵɵelement(9, \"ion-icon\", 16);\n    i0.ɵɵelementStart(10, \"ion-label\", 15);\n    i0.ɵɵtext(11, \"TEILEN\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(12, PredigtElementComponent_div_16_div_12_Template, 5, 0, \"div\", 17);\n    i0.ɵɵtemplate(13, PredigtElementComponent_div_16_ng_template_13_Template, 4, 0, \"ng-template\", null, 18, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementStart(15, \"ion-tab-button\", 2);\n    i0.ɵɵlistener(\"click\", function PredigtElementComponent_div_16_Template_ion_tab_button_click_15_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.openSkript(ctx_r16.predigt.skript[0]));\n    });\n    i0.ɵɵelement(16, \"ion-icon\", 19);\n    i0.ɵɵelementStart(17, \"ion-label\", 20);\n    i0.ɵɵtext(18, \"SKRIPT\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"ion-tab-button\", 2);\n    i0.ɵɵlistener(\"click\", function PredigtElementComponent_div_16_Template_ion_tab_button_click_19_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.playYT(ctx_r17.predigt.youtube[0]));\n    });\n    i0.ɵɵelement(20, \"ion-icon\", 21);\n    i0.ɵɵelementStart(21, \"ion-label\", 20);\n    i0.ɵɵtext(22, \"YOUTUBE\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵtemplate(23, PredigtElementComponent_div_16_div_23_Template, 7, 1, \"div\", 9);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const _r6 = i0.ɵɵreference(14);\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r4.isLocal(ctx_r4.predigt.enclosure[0].$.url))(\"ngIfElse\", _r6);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"color\", ctx_r4.predigt.skript != \"\" ? \"primary\" : \"secondary\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"color\", ctx_r4.predigt.skript != \"\" ? \"primary\" : \"secondary\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"color\", ctx_r4.predigt.youtube != \"\" ? \"primary\" : \"secondary\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"color\", ctx_r4.predigt.youtube != \"\" ? \"primary\" : \"secondary\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.playervisible);\n  }\n}\n//import { runInThisContext } from 'vm';\n//import { WebView } from '@awesome-cordova-plugins/ionic-webview/ngx';\nconst MEDIA_FOLDER_NAME = 'temp_files';\nexport let PredigtElementComponent = /*#__PURE__*/(() => {\n  class PredigtElementComponent {\n    constructor(userState, socialSharing, platform, router, iab, file, transfer\n    //private webview: WebView\n    ) {\n      this.userState = userState;\n      this.socialSharing = socialSharing;\n      this.platform = platform;\n      this.router = router;\n      this.iab = iab;\n      this.file = file;\n      this.transfer = transfer;\n      this.fulltext = false;\n      this.playervisible = false;\n      //this.platform.backButton.subscribeWithPriority(10, () => {\n      //  this.router.navigate([\"/tabs/tab1\"]);\n      //});\n    }\n    //ngAfterViewChecked(): void {\n    //if(this.userState.AppPageMedienInit){\n    //this.userState.AppPageMedienInit = false;\n    //}\n    //}\n    isLocal(mp3file, getpath = false) {\n      let fileName = mp3file.substr(mp3file.lastIndexOf('/') + 1);\n      /*\n      console.log('check if file '+fileName+' is local');\n      console.log('finde in ');\n      console.log(this.userState.SermonLocalFiles);\n      */\n      let res = this.userState.SermonLocalFiles.find(e => e.name === fileName);\n      if (res !== undefined) {\n        //console.log(res.isFile);\n        if (getpath) {\n          return this.file.dataDirectory + MEDIA_FOLDER_NAME + res.fullPath;\n          //nativeURL;\n        } else {\n          return res.isFile;\n        }\n      } else {\n        //console.log('not found');\n        return false;\n      }\n    }\n    expandTab() {\n      this.fulltext = true;\n    }\n    closeTab() {\n      this.fulltext = false;\n      this.playervisible = false;\n    }\n    toggleTab() {\n      if (this.fulltext) {\n        this.fulltext = false;\n      } else {\n        this.fulltext = true;\n      }\n    }\n    openPlayer(sermonURL) {\n      this.playervisible = true;\n      let fileresult = this.isLocal(sermonURL, true);\n      if (fileresult) {\n        console.log('currentSermonURL aus isLocal auslesen:' + fileresult);\n        //this.currentSermonURL = this.webview.convertFileSrc(fileresult);\n        //console.log('converted: '+this.currentSermonURL);\n        this.currentSermonURL = fileresult;\n      } else {\n        console.log('currentSermonURL aus original URL: ' + sermonURL);\n        this.currentSermonURL = sermonURL;\n      }\n    }\n    closePlayer() {\n      this.playervisible = false;\n    }\n    shareLink(predigturl, titel, excerpt) {\n      var message = \"Hör dir diese Predigt an!\\n\\n\" + excerpt;\n      var subject = \"\" + titel;\n      var url = \"\" + predigturl;\n      var options = {\n        message: message,\n        subject: subject,\n        url: url\n      };\n      this.socialSharing.shareWithOptions(options);\n      //    console.log('share subject='+subject+'  url='+predigturl+'   und msg='+message);\n    }\n\n    openSkript(skript) {\n      if (skript != '') {\n        this.platform.ready().then(() => {\n          this.iab.create(skript, '_system');\n        });\n      }\n    }\n    playYT(YTlink) {\n      if (YTlink != '') {\n        this.platform.ready().then(() => {\n          this.iab.create(YTlink, '_system');\n        });\n      }\n    }\n    saveSermon(mp3link) {\n      //is file already there?\n      let fileresult = this.isLocal(mp3link);\n      //here encoding path as encodeURI() format.  \n      let url = encodeURI(mp3link);\n      let fileName = mp3link.substr(mp3link.lastIndexOf('/') + 1);\n      console.log('sichere Predigt Datei ' + fileName + ' von ' + mp3link);\n      //here initializing object. \n      this.fileTransfer = this.transfer.create();\n      // here iam mentioned this line this.file.externalRootDirectory is a native pre-defined file path storage. You can change a file path whatever pre-defined method.  \n      this.fileTransfer.download(url, this.file.dataDirectory + MEDIA_FOLDER_NAME + '/' + fileName, true).then(entry => {\n        //here logging our success downloaded file path in mobile.  \n        console.log('download completed: ' + entry.toURL());\n      }, error => {\n        //here logging our error its easier to find out what type of error occured.  \n        console.log('download failed: ' + error);\n      });\n    }\n    freeUpSermon(mp3name) {\n      console.log('remove ' + mp3name);\n    }\n  }\n  PredigtElementComponent.ɵfac = function PredigtElementComponent_Factory(t) {\n    return new (t || PredigtElementComponent)(i0.ɵɵdirectiveInject(i1.UserstateService), i0.ɵɵdirectiveInject(i2.SocialSharing), i0.ɵɵdirectiveInject(i3.Platform), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.InAppBrowser), i0.ɵɵdirectiveInject(i6.File), i0.ɵɵdirectiveInject(i7.FileTransfer));\n  };\n  PredigtElementComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PredigtElementComponent,\n    selectors: [[\"app-predigt-element\"]],\n    inputs: {\n      predigt: \"predigt\"\n    },\n    decls: 17,\n    vars: 12,\n    consts: [[1, \"sermons\"], [1, \"sermongrid\"], [3, \"click\"], [\"size\", \"11\", 1, \"sermoncol\"], [1, \"predigttitel\"], [1, \"title\"], [\"size\", \"1\", 1, \"openclose\"], [\"class\", \"accordionbutton accordion-closed\", \"name\", \"close-outline\", 4, \"ngIf\"], [\"class\", \"accordionbutton accordion-open\", \"name\", \"chevron-down-outline\", 4, \"ngIf\"], [4, \"ngIf\"], [\"class\", \"descriptionopen\", 4, \"ngIf\"], [\"name\", \"close-outline\", 1, \"accordionbutton\", \"accordion-closed\"], [\"name\", \"chevron-down-outline\", 1, \"accordionbutton\", \"accordion-open\"], [1, \"descriptionopen\"], [\"name\", \"headset-sharp\", \"color\", \"primary\"], [\"color\", \"primary\", 1, \"descr\"], [\"name\", \"share-sharp\", \"color\", \"primary\"], [4, \"ngIf\", \"ngIfElse\"], [\"conditionFalse\", \"\"], [\"name\", \"reader-sharp\", 3, \"color\"], [1, \"descr\", 3, \"color\"], [\"src\", \"../../assets/icon/youtube.svg\", 3, \"color\"], [\"name\", \"cloud-download\", \"color\", \"primary\"], [\"name\", \"cloud-done\", \"color\", \"primary\"], [\"controls\", \"\", 1, \"descriptionopen\"], [\"type\", \"audio/mpeg\", 3, \"src\"]],\n    template: function PredigtElementComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\", 0)(2, \"ion-grid\", 1)(3, \"ion-row\", 2);\n        i0.ɵɵlistener(\"click\", function PredigtElementComponent_Template_ion_row_click_3_listener() {\n          return ctx.toggleTab();\n        });\n        i0.ɵɵelementStart(4, \"ion-col\", 3)(5, \"div\", 4);\n        i0.ɵɵtext(6);\n        i0.ɵɵpipe(7, \"date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 5);\n        i0.ɵɵtext(9);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"ion-col\", 6);\n        i0.ɵɵtemplate(11, PredigtElementComponent_ion_icon_11_Template, 1, 0, \"ion-icon\", 7);\n        i0.ɵɵtemplate(12, PredigtElementComponent_ion_icon_12_Template, 1, 0, \"ion-icon\", 8);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(13, \"div\");\n        i0.ɵɵtemplate(14, PredigtElementComponent_div_14_Template, 2, 1, \"div\", 9);\n        i0.ɵɵtemplate(15, PredigtElementComponent_div_15_Template, 2, 1, \"div\", 10);\n        i0.ɵɵtemplate(16, PredigtElementComponent_div_16_Template, 24, 7, \"div\", 9);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind4(7, 7, ctx.predigt.pubDate[0], \"fullDate\", \"\", \"de\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.predigt.title[0]);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.fulltext);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.fulltext);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.fulltext);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.fulltext);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.fulltext);\n      }\n    },\n    dependencies: [i8.NgIf, i3.IonButtons, i3.IonCol, i3.IonGrid, i3.IonIcon, i3.IonItem, i3.IonLabel, i3.IonRow, i3.IonTabButton, i3.IonToolbar, i8.DatePipe],\n    styles: [\".title[_ngcontent-%COMP%]{text-overflow:ellipsis}.accordionbutton[_ngcontent-%COMP%]{position:absolute;top:25%}.descriptionopen[_ngcontent-%COMP%]{white-space:pre-line;text-align:justify;width:100%}.predigttitel[_ngcontent-%COMP%]{color:#777;font-family:Source Sans Pro;font-style:normal;font-weight:600;letter-spacing:0px;font-size:14px}.title[_ngcontent-%COMP%]{color:#1e3653;font-family:Source Sans Pro;font-style:normal;font-weight:700;letter-spacing:0px;font-size:16px}div[_ngcontent-%COMP%]{color:#777;font-family:Source Sans Pro;font-style:normal;font-weight:400;letter-spacing:0px;font-size:14px}.sermongrid[_ngcontent-%COMP%], .sermoncol[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important}.openclose[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important;position:absolute;right:0}.sermons[_ngcontent-%COMP%]{-webkit-margin-end:29px;margin-inline-end:29px}.descr[_ngcontent-%COMP%]{font-size:8.5px;font-weight:700;letter-spacing:.5px}.ion-color-primary[_ngcontent-%COMP%]{--ion-color-base: #1E3653 !important}.ion-color-secondary[_ngcontent-%COMP%]{--ion-color-base: rgb(153, 153, 153) !important}\"]\n  });\n  return PredigtElementComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}